"use strict";(self.webpackChunkshop=self.webpackChunkshop||[]).push([[24],{5024:(bt,x,a)=>{a.r(x),a.d(x,{ProductsModule:()=>vt});var p=a(177),c=a(4341),h=a(6448),t=a(6276),P=a(8359);class I extends P.yU{constructor(n,e){super()}schedule(n,e=0){return this}}const v={setInterval(r,n,...e){const{delegate:o}=v;return o?.setInterval?o.setInterval(r,n,...e):setInterval(r,n,...e)},clearInterval(r){const{delegate:n}=v;return(n?.clearInterval||clearInterval)(r)},delegate:void 0};var E=a(7908);const _={now:()=>(_.delegate||Date).now(),delegate:void 0};class f{constructor(n,e=f.now){this.schedulerActionCtor=n,this.now=e}schedule(n,e=0,o){return new this.schedulerActionCtor(this,n).schedule(o,e)}}f.now=_.now;const S=new class $ extends f{constructor(n,e=f.now){super(n,e),this.actions=[],this._active=!1}flush(n){const{actions:e}=this;if(this._active)return void e.push(n);let o;this._active=!0;do{if(o=n.execute(n.state,n.delay))break}while(n=e.shift());if(this._active=!1,o){for(;n=e.shift();)n.unsubscribe();throw o}}}(class T extends I{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){var o;if(this.closed)return this;this.state=n;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,e)),this.pending=!0,this.delay=e,this.id=null!==(o=this.id)&&void 0!==o?o:this.requestAsyncId(s,this.id,e),this}requestAsyncId(n,e,o=0){return v.setInterval(n.flush.bind(n,this),o)}recycleAsyncId(n,e,o=0){if(null!=o&&this.delay===o&&!1===this.pending)return e;null!=e&&v.clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const o=this._execute(n,e);if(o)return o;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let i,o=!1;try{this.work(n)}catch(s){o=!0,i=s||new Error("Scheduled action threw falsy error")}if(o)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:n,scheduler:e}=this,{actions:o}=e;this.work=this.state=this.scheduler=null,this.pending=!1,(0,E.o)(o,this),null!=n&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null,super.unsubscribe()}}});var R=a(9974),G=a(4360),D=a(3294),y=a(6344),k=a(5567),u=a(3796);const g=new class M{constructor(){this.products=(0,t.EWP)(()=>(0,u.XJ)().products),this.loading=(0,t.EWP)(()=>(0,u.XJ)().loading),this.error=(0,t.EWP)(()=>(0,u.XJ)().error),this.featuredProducts=u.OF.featuredProducts}setProducts(n){(0,u.$j)(e=>({...e,products:n}))}setLoading(n){(0,u.$j)(e=>({...e,loading:n}))}setError(n){(0,u.$j)(e=>({...e,error:n}))}addProduct(n){(0,u.$j)(e=>({...e,products:[...e.products,n]}))}updateProduct(n){(0,u.$j)(e=>({...e,products:e.products.map(o=>o.id===n.id?n:o)}))}removeProduct(n){(0,u.$j)(e=>({...e,products:e.products.filter(o=>o.id!==n)}))}};var j=a(6243),C=a(8385);function V(r,n){if(1&r){const e=t.RV6();t.qSk(),t.joV(),t.j41(0,"button",18),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.clearSearch())}),t.qSk(),t.j41(1,"svg",19),t.nrm(2,"path",20),t.k0s()()}}function O(r,n){if(1&r&&(t.qSk(),t.joV(),t.j41(0,"div",21),t.EFF(1),t.k0s()),2&r){const e=t.XpG();t.R7$(1),t.E5c(" Found ",e.searchResultsCount()," product",1!==e.searchResultsCount()?"s":"",' for "',e.searchTerm(),'" ')}}function L(r,n){if(1&r){const e=t.RV6();t.j41(0,"button",22),t.bIt("click",function(){const s=t.eBV(e).$implicit,l=t.XpG();return t.Njj(l.onCategoryChange(s))}),t.EFF(1),t.nI1(2,"titlecase"),t.k0s()}if(2&r){const e=n.$implicit,o=t.XpG();t.HbH(o.selectedCategory()===e?"bg-primary-500 text-white px-4 py-2 rounded-full border border-primary-500 transition-colors shadow-sm":"px-4 py-2 rounded-full border border-gray-300 hover:bg-gray-50 transition-colors bg-white"),t.BMQ("data-category",e),t.R7$(1),t.SpI(" ","all"===e?"All":t.bMT(2,4,e)," ")}}function N(r,n){if(1&r&&(t.j41(0,"span",28),t.EFF(1),t.k0s()),2&r){const e=n.$implicit;t.R7$(1),t.SpI(" ",e," ")}}function Y(r,n){if(1&r){const e=t.RV6();t.j41(0,"div",23)(1,"div",24)(2,"div",25)(3,"span"),t.EFF(4,"Active filters:"),t.k0s(),t.DNE(5,N,2,1,"span",26),t.k0s(),t.j41(6,"button",27),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.clearAllFilters())}),t.EFF(7," Clear all "),t.k0s()()()}if(2&r){const e=t.XpG();t.R7$(5),t.Y8G("ngForOf",e.activeFilters())}}function q(r,n){1&r&&(t.j41(0,"div",29),t.nrm(1,"div",30),t.k0s())}function A(r,n){if(1&r){const e=t.RV6();t.j41(0,"div",31)(1,"p",32),t.EFF(2),t.k0s(),t.j41(3,"button",33),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.loadProducts())}),t.EFF(4," Try again "),t.k0s()()}if(2&r){const e=t.XpG();t.R7$(2),t.JRh(e.error())}}function X(r,n){if(1&r){const e=t.RV6();t.j41(0,"div",37)(1,"div",38),t.qSk(),t.j41(2,"svg",39),t.nrm(3,"path",40),t.k0s(),t.joV(),t.j41(4,"h3",41),t.EFF(5,"No products found"),t.k0s(),t.j41(6,"p",42),t.EFF(7," No products match your search criteria. Try adjusting your filters or search term. "),t.k0s(),t.j41(8,"button",43),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.clearAllFilters())}),t.EFF(9," Show all products "),t.k0s()()()}}function Q(r,n){if(1&r&&(t.j41(0,"span"),t.EFF(1," \u2605 "),t.k0s()),2&r){const e=n.index,o=t.XpG().$implicit;t.HbH(e<o.rating.rate?"text-yellow-400":"text-gray-300")}}const W=function(){return[1,2,3,4,5]};function H(r,n){if(1&r){const e=t.RV6();t.j41(0,"div",46),t.bIt("click",function(){const s=t.eBV(e).$implicit,l=t.XpG(3);return t.Njj(l.viewProductDetails(s.id))}),t.j41(1,"div",47)(2,"div",48),t.nrm(3,"img",49),t.k0s(),t.j41(4,"h3",50),t.EFF(5),t.k0s(),t.j41(6,"p",51),t.EFF(7),t.k0s(),t.j41(8,"div",52)(9,"span",53),t.EFF(10),t.nI1(11,"titlecase"),t.k0s()(),t.j41(12,"div",54)(13,"div",55),t.DNE(14,Q,2,2,"span",56),t.k0s(),t.j41(15,"span",57),t.EFF(16),t.k0s()(),t.j41(17,"div",24)(18,"span",58),t.EFF(19),t.nI1(20,"currency"),t.k0s(),t.j41(21,"button",59),t.bIt("click",function(i){const l=t.eBV(e).$implicit;return t.XpG(3).addToCart(l),t.Njj(i.stopPropagation())}),t.EFF(22," Add "),t.k0s()()()()}if(2&r){const e=n.$implicit;t.R7$(3),t.Y8G("src",e.image,t.B4B)("alt",e.title),t.R7$(2),t.SpI(" ",e.title," "),t.R7$(2),t.SpI(" ",e.description," "),t.R7$(3),t.SpI(" ",t.bMT(11,8,e.category)," "),t.R7$(4),t.Y8G("ngForOf",t.lJ4(12,W)),t.R7$(2),t.SpI(" (",e.rating.count,") "),t.R7$(3),t.SpI(" ",t.bMT(20,10,e.price)," ")}}function z(r,n){if(1&r&&(t.j41(0,"div",44),t.DNE(1,H,23,13,"div",45),t.k0s()),2&r){const e=t.XpG(2);t.R7$(1),t.Y8G("ngForOf",e.filteredProducts())("ngForTrackBy",e.trackByProductId)}}function J(r,n){1&r&&(t.j41(0,"div",60)(1,"p",61),t.EFF(2,"No products available"),t.k0s()())}function U(r,n){if(1&r&&(t.j41(0,"div"),t.DNE(1,X,10,0,"div",34),t.DNE(2,z,2,2,"div",35),t.DNE(3,J,3,0,"div",36),t.k0s()),2&r){const e=t.XpG();t.R7$(1),t.Y8G("ngIf",0===e.filteredProducts().length&&("all"!==e.selectedCategory()||e.hasActiveSearch())),t.R7$(1),t.Y8G("ngIf",e.filteredProducts().length>0),t.R7$(1),t.Y8G("ngIf",0===e.filteredProducts().length&&"all"===e.selectedCategory()&&!e.hasActiveSearch())}}let Z=(()=>{class r{constructor(){this.fb=(0,t.WQX)(c.ok),this.apiService=(0,t.WQX)(y.G),this.notificationService=(0,t.WQX)(k.J),this.router=(0,t.WQX)(h.Ix),this.searchForm=this.fb.group({search:[""]}),this.selectedCategory=(0,t.vPA)("all"),this.categories=(0,t.vPA)([]),this.searchTerm=(0,t.vPA)(""),this.loading=g.loading,this.error=g.error,this.filteredProducts=(0,t.EWP)(()=>{const e=g.products(),o=this.searchTerm(),i=this.selectedCategory();if(!e)return[];let s=e;if("all"!==i&&(s=s.filter(l=>l.category===i)),o){const l=o.toLowerCase();s=s.filter(d=>d.title.toLowerCase().includes(l)||d.description.toLowerCase().includes(l)||d.category.toLowerCase().includes(l))}return s}),this.hasActiveSearch=(0,t.EWP)(()=>this.searchTerm().length>0),this.searchResultsCount=(0,t.EWP)(()=>this.filteredProducts().length),this.activeFilters=(0,t.EWP)(()=>{const e=[];return"all"!==this.selectedCategory()&&e.push(`Category: ${this.selectedCategory()}`),this.searchTerm()&&e.push(`Search: "${this.searchTerm()}"`),e}),this.searchForm.get("search")?.valueChanges.pipe(function B(r,n=S){return(0,R.N)((e,o)=>{let i=null,s=null,l=null;const d=()=>{if(i){i.unsubscribe(),i=null;const m=s;s=null,o.next(m)}};function b(){const m=l+r,w=n.now();if(w<m)return i=this.schedule(void 0,m-w),void o.add(i);d()}e.subscribe((0,G._)(o,m=>{s=m,l=n.now(),i||(i=n.schedule(b,r),o.add(i))},()=>{d(),o.complete()},void 0,()=>{s=i=null}))})}(300),(0,D.F)()).subscribe(e=>{this.searchTerm.set(e?.toLowerCase()||"")})}ngOnInit(){this.loadProducts(),this.loadCategories()}trackByProductId(e,o){return o.id}loadProducts(){g.setLoading(!0),this.apiService.getProductsWithDetails().subscribe({next:e=>{g.setProducts(e)},error:e=>{g.setError("Error loading products"),this.notificationService.error("The products could not be loaded")},complete:()=>{g.setLoading(!1)}})}loadCategories(){this.apiService.getCategories().subscribe({next:e=>{this.categories.set(["all",...e])},error:e=>{this.notificationService.error("Error loading categories")}})}onCategoryChange(e){this.selectedCategory.set(e)}addToCart(e){try{j.O.addToCart(e),this.notificationService.success("Product added to cart",`${e.title}`)}catch{this.notificationService.error("Error adding product to cart")}}viewProductDetails(e){this.router.navigate(["/products",e])}clearSearch(){this.searchForm.patchValue({search:""}),this.searchTerm.set("")}clearAllFilters(){this.selectedCategory.set("all"),this.clearSearch()}static{this.\u0275fac=function(o){return new(o||r)}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-product-list"]],decls:19,vars:8,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"mb-8"],[1,"text-3xl","font-bold","text-gray-900","mb-4"],[1,"mb-6"],[1,"max-w-md","relative",3,"formGroup"],[1,"relative"],["type","text","formControlName","search","placeholder","Search products by name, description or category...","appClickLogger","B\xfasqueda de productos",1,"input-field","w-full","pl-10","pr-10","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-all","duration-300"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["type","button","class","absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 transition-colors",3,"click",4,"ngIf"],["class","mt-2 text-sm text-gray-600",4,"ngIf"],[1,"flex","flex-wrap","gap-2","mb-6"],[3,"class","click",4,"ngFor","ngForOf"],["class","bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",4,"ngIf"],["class","flex justify-center items-center py-12",4,"ngIf"],["class","bg-red-50 border border-red-200 rounded-lg p-4 text-center",4,"ngIf"],[4,"ngIf"],["type","button",1,"absolute","inset-y-0","right-0","pr-3","flex","items-center","text-gray-400","hover:text-gray-600","transition-colors",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"mt-2","text-sm","text-gray-600"],[3,"click"],[1,"bg-blue-50","border","border-blue-200","rounded-lg","p-3","mb-4"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","gap-2","text-sm","text-blue-800"],["class","bg-blue-100 px-2 py-1 rounded-full text-xs font-medium",4,"ngFor","ngForOf"],[1,"text-blue-600","hover:text-blue-800","text-sm","font-medium","transition-colors",3,"click"],[1,"bg-blue-100","px-2","py-1","rounded-full","text-xs","font-medium"],[1,"flex","justify-center","items-center","py-12"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-primary-500"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-4","text-center"],[1,"text-red-800"],[1,"btn-primary","mt-2",3,"click"],["class","text-center py-12 bg-gray-50 rounded-lg",4,"ngIf"],["class","grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",4,"ngIf"],["class","text-center py-12",4,"ngIf"],[1,"text-center","py-12","bg-gray-50","rounded-lg"],[1,"max-w-md","mx-auto"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-16","w-16","text-gray-400","mx-auto","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1","d","M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-gray-500","mb-4"],[1,"btn-primary",3,"click"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-6"],["class","card fade-in cursor-pointer hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1 bg-white rounded-lg border border-gray-200 overflow-hidden",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"card","fade-in","cursor-pointer","hover:shadow-lg","transition-all","duration-300","transform","hover:-translate-y-1","bg-white","rounded-lg","border","border-gray-200","overflow-hidden",3,"click"],[1,"p-4"],[1,"aspect-w-1","aspect-h-1","mb-4"],[1,"w-full","h-48","object-contain","bg-white","p-4","rounded-lg",3,"src","alt"],[1,"font-semibold","text-lg","mb-2","line-clamp-2","text-gray-900"],[1,"text-gray-600","text-sm","mb-3","line-clamp-2"],[1,"mb-3"],[1,"inline-block","bg-gray-100","text-gray-700","text-xs","px-2","py-1","rounded-full"],[1,"flex","items-center","mb-3"],[1,"flex","text-yellow-400"],[3,"class",4,"ngFor","ngForOf"],[1,"ml-2","text-sm","text-gray-600"],[1,"text-2xl","font-bold","text-primary-600"],["appClickLogger","Add to cart",1,"btn-primary","bg-primary-500","hover:bg-primary-600","text-white","px-4","py-2","rounded-lg","transition-colors",3,"click"],[1,"text-center","py-12"],[1,"text-gray-500","text-lg"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h1",2),t.EFF(3,"Product catalog"),t.k0s(),t.j41(4,"div",3)(5,"form",4)(6,"div",5),t.nrm(7,"input",6),t.j41(8,"div",7),t.qSk(),t.j41(9,"svg",8),t.nrm(10,"path",9),t.k0s()(),t.DNE(11,V,3,0,"button",10),t.k0s(),t.DNE(12,O,2,3,"div",11),t.k0s()(),t.joV(),t.j41(13,"div",12),t.DNE(14,L,3,6,"button",13),t.k0s(),t.DNE(15,Y,8,1,"div",14),t.k0s(),t.DNE(16,q,2,0,"div",15),t.DNE(17,A,5,1,"div",16),t.DNE(18,U,4,3,"div",17),t.k0s()),2&o&&(t.R7$(5),t.Y8G("formGroup",i.searchForm),t.R7$(6),t.Y8G("ngIf",i.hasActiveSearch()),t.R7$(1),t.Y8G("ngIf",i.hasActiveSearch()),t.R7$(2),t.Y8G("ngForOf",i.categories()),t.R7$(1),t.Y8G("ngIf",i.activeFilters().length>0),t.R7$(1),t.Y8G("ngIf",i.loading()),t.R7$(1),t.Y8G("ngIf",i.error()&&!i.loading()),t.R7$(1),t.Y8G("ngIf",!i.loading()&&!i.error()))},dependencies:[p.Sq,p.bT,c.qT,c.me,c.BC,c.cb,c.j4,c.JD,C.i,p.PV,p.oe],styles:["[_nghost-%COMP%]{display:block}.line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.click-active[_ngcontent-%COMP%]{transform:scale(.95);transition:transform .1s ease}.product-card[_ngcontent-%COMP%]{transition:all .3s ease}.product-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px)}.product-card[_ngcontent-%COMP%]:hover   .product-image[_ngcontent-%COMP%]{transform:scale(1.05)}.product-image[_ngcontent-%COMP%]{transition:transform .3s ease}"]})}}return r})();function K(r,n){1&r&&(t.qSk(),t.joV(),t.j41(0,"div",7),t.nrm(1,"div",8),t.k0s())}function tt(r,n){if(1&r){const e=t.RV6();t.qSk(),t.joV(),t.j41(0,"div",9)(1,"div",10),t.qSk(),t.j41(2,"svg",11),t.nrm(3,"path",12),t.k0s()(),t.joV(),t.j41(4,"h2",13),t.EFF(5,"Error loading product"),t.k0s(),t.j41(6,"p",14),t.EFF(7),t.k0s(),t.j41(8,"button",15),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.loadProduct())}),t.EFF(9," Retry "),t.k0s()()}if(2&r){const e=t.XpG();t.R7$(7),t.JRh(e.error())}}function et(r,n){if(1&r&&(t.j41(0,"div",58),t.nrm(1,"img",59),t.k0s()),2&r){const e=n.$implicit,o=t.XpG(2);t.R7$(1),t.Y8G("src",o.product().image,t.B4B)("alt",o.product().title+" thumbnail "+e)}}function rt(r,n){1&r&&(t.qSk(),t.j41(0,"svg",63),t.nrm(1,"path",64),t.k0s())}function ot(r,n){1&r&&(t.qSk(),t.j41(0,"svg",63),t.nrm(1,"path",64),t.k0s())}function nt(r,n){1&r&&(t.qSk(),t.j41(0,"svg",65),t.nrm(1,"path",64),t.k0s())}function it(r,n){if(1&r&&(t.qex(0),t.DNE(1,rt,2,0,"svg",60),t.DNE(2,ot,2,0,"svg",61),t.DNE(3,nt,2,0,"svg",62),t.bVm()),2&r){const e=n.ngIf,o=t.XpG(2);t.R7$(1),t.Y8G("ngForOf",o.getArray(e.full))("ngForTrackBy",o.trackByIndex),t.R7$(1),t.Y8G("ngIf",e.half),t.R7$(1),t.Y8G("ngForOf",o.getArray(e.empty))("ngForTrackBy",o.trackByIndex)}}function st(r,n){1&r&&(t.j41(0,"div"),t.EFF(1,"The required quantity"),t.k0s())}function ct(r,n){1&r&&(t.j41(0,"div"),t.EFF(1,"The minimum amount is 1"),t.k0s())}function at(r,n){1&r&&(t.j41(0,"div"),t.EFF(1,"The maximum amount is 10"),t.k0s())}function lt(r,n){if(1&r&&(t.qSk(),t.joV(),t.j41(0,"div",66),t.DNE(1,st,2,0,"div",27),t.DNE(2,ct,2,0,"div",27),t.DNE(3,at,2,0,"div",27),t.k0s()),2&r){const e=t.XpG(2);t.R7$(1),t.Y8G("ngIf",null==e.quantity.errors?null:e.quantity.errors.required),t.R7$(1),t.Y8G("ngIf",null==e.quantity.errors?null:e.quantity.errors.min),t.R7$(1),t.Y8G("ngIf",null==e.quantity.errors?null:e.quantity.errors.max)}}const dt=function(r){return["/products",r]};function ut(r,n){if(1&r&&(t.j41(0,"div",71)(1,"div",72),t.nrm(2,"img",73),t.j41(3,"h3",74),t.EFF(4),t.nI1(5,"slice"),t.k0s(),t.j41(6,"div",75)(7,"span",76),t.EFF(8),t.nI1(9,"currency"),t.k0s(),t.j41(10,"div",77)(11,"span",78),t.EFF(12,"\u2605"),t.k0s(),t.EFF(13),t.k0s()()()()),2&r){const e=n.$implicit;t.Y8G("routerLink",t.eq3(12,dt,e.id)),t.R7$(2),t.Y8G("src",e.image,t.B4B)("alt",e.title),t.R7$(2),t.SpI(" ",t.brH(5,6,e.title,0,50)+(e.title.length>50?"...":"")," "),t.R7$(4),t.SpI(" ",t.bMT(9,10,e.price)," "),t.R7$(5),t.SpI(" ",e.rating.rate," ")}}function pt(r,n){if(1&r&&(t.qSk(),t.joV(),t.j41(0,"div",67)(1,"h2",68),t.EFF(2,"Related Products"),t.k0s(),t.j41(3,"div",69),t.DNE(4,ut,14,14,"div",70),t.k0s()()),2&r){const e=t.XpG(2);t.R7$(4),t.Y8G("ngForOf",e.relatedProducts())("ngForTrackBy",e.trackByProductId)}}const gt=function(){return[1,2,3,4]};function mt(r,n){if(1&r){const e=t.RV6();t.qSk(),t.joV(),t.j41(0,"div",16)(1,"div",17)(2,"div",18)(3,"div",19),t.nrm(4,"img",20),t.k0s(),t.j41(5,"div",21),t.DNE(6,et,2,2,"div",22),t.k0s()(),t.j41(7,"div",18)(8,"span",23),t.EFF(9),t.k0s(),t.j41(10,"h1",24),t.EFF(11),t.k0s(),t.j41(12,"div",25)(13,"div",26),t.DNE(14,it,4,5,"ng-container",27),t.k0s(),t.j41(15,"span",28),t.EFF(16),t.k0s()(),t.j41(17,"div",29)(18,"span",30),t.EFF(19),t.nI1(20,"currency"),t.k0s(),t.j41(21,"span",31),t.EFF(22,"VAT included"),t.k0s()(),t.j41(23,"div",32)(24,"h3",33),t.EFF(25,"Description"),t.k0s(),t.j41(26,"p",34),t.EFF(27),t.k0s()(),t.j41(28,"div",35)(29,"h3",36),t.EFF(30,"Buy product"),t.k0s(),t.j41(31,"div",37)(32,"label",38),t.EFF(33," Amount "),t.k0s(),t.j41(34,"div",39)(35,"button",40),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.decrementQuantity())}),t.qSk(),t.j41(36,"svg",41),t.nrm(37,"path",42),t.k0s()(),t.joV(),t.nrm(38,"input",43),t.j41(39,"button",44),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.incrementQuantity())}),t.qSk(),t.j41(40,"svg",41),t.nrm(41,"path",45),t.k0s()()(),t.DNE(42,lt,4,3,"div",46),t.k0s(),t.joV(),t.j41(43,"div",47)(44,"button",48),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.addToCart())}),t.qSk(),t.j41(45,"svg",49),t.nrm(46,"path",50),t.k0s(),t.EFF(47," Add to Cart "),t.k0s(),t.joV(),t.j41(48,"button",51),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.buyNow())}),t.EFF(49," Buy now "),t.k0s()()(),t.j41(50,"div",52)(51,"div",26),t.qSk(),t.j41(52,"svg",53),t.nrm(53,"path",54),t.k0s(),t.EFF(54," In stock "),t.k0s(),t.joV(),t.j41(55,"div",26),t.qSk(),t.j41(56,"svg",53),t.nrm(57,"path",55),t.k0s(),t.EFF(58," Free shipping "),t.k0s(),t.joV(),t.j41(59,"div",26),t.qSk(),t.j41(60,"svg",53),t.nrm(61,"path",56),t.k0s(),t.EFF(62," Warranty "),t.k0s()()()(),t.DNE(63,pt,5,2,"div",57),t.k0s()}if(2&r){const e=t.XpG();t.R7$(4),t.Y8G("src",e.product().image,t.B4B)("alt",e.product().title),t.R7$(2),t.Y8G("ngForOf",t.lJ4(20,gt))("ngForTrackBy",e.trackByIndex),t.R7$(3),t.SpI(" ",e.product().category," "),t.R7$(2),t.SpI(" ",e.product().title," "),t.R7$(3),t.Y8G("ngIf",e.getStarRating(e.product().rating.rate)),t.R7$(2),t.Lme(" ",e.product().rating.rate," (",e.product().rating.count," reviews) "),t.R7$(3),t.SpI(" ",t.bMT(20,18,e.product().price)," "),t.R7$(8),t.SpI(" ",e.product().description," "),t.R7$(8),t.Y8G("disabled",e.getQuantityValue()<=1),t.R7$(3),t.Y8G("formControl",e.quantity),t.R7$(1),t.Y8G("disabled",e.getQuantityValue()>=10),t.R7$(3),t.Y8G("ngIf",e.quantity.invalid&&e.quantity.touched),t.R7$(2),t.Y8G("disabled",e.quantityForm.invalid),t.R7$(4),t.Y8G("disabled",e.quantityForm.invalid),t.R7$(15),t.Y8G("ngIf",e.relatedProducts().length>0)}}let ht=(()=>{class r{constructor(e,o,i,s,l){this.route=e,this.router=o,this.fb=i,this.apiService=s,this.notificationService=l,this.product=(0,t.vPA)(null),this.loading=(0,t.vPA)(!0),this.error=(0,t.vPA)(""),this.quantityForm=this.fb.group({quantity:[1,[c.k0.required,c.k0.min(1),c.k0.max(10)]]}),this.relatedProducts=(0,t.EWP)(()=>{const d=this.product();return d?g.products().filter(b=>b.category===d.category&&b.id!==d.id).slice(0,4):[]})}ngOnInit(){this.loadProduct()}loadProduct(){this.loading.set(!0),this.error.set("");const e=Number(this.route.snapshot.paramMap.get("id"));if(isNaN(e))return this.error.set("Invalid product ID"),void this.loading.set(!1);const o=g.products().find(i=>i.id===e);o?(this.product.set(o),this.loading.set(!1)):this.apiService.getProduct(e).subscribe({next:i=>{this.product.set(i),this.loading.set(!1)},error:i=>{this.error.set("Error loading product"),this.notificationService.error("The product could not be loaded"),this.loading.set(!1)}})}getStarRating(e){const o=Math.floor(e),i=e%1>=.5;return{full:o,half:i,empty:5-o-(i?1:0)}}getArray(e){return Array(e).fill(0)}trackByIndex(e){return e}trackByProductId(e,o){return o.id}getQuantityValue(){return this.quantity.value||1}incrementQuantity(){const e=this.getQuantityValue();e<10&&this.quantity.setValue(e+1)}decrementQuantity(){const e=this.getQuantityValue();e>1&&this.quantity.setValue(e-1)}get quantity(){return this.quantityForm.get("quantity")}addToCart(){const e=this.product(),o=this.getQuantityValue();if(e&&this.quantityForm.valid)try{j.O.addToCart(e,o),this.notificationService.success("Product added to cart",`${e.title} (${o} ${1===o?"unidad":"units"})`)}catch{this.notificationService.error("Error adding product to cart")}else this.notificationService.error("Please enter a valid amount")}buyNow(){this.router.navigate(["/cart"])}goBack(){this.router.navigate(["/products"])}static{this.\u0275fac=function(o){return new(o||r)(t.rXU(h.nX),t.rXU(h.Ix),t.rXU(c.ok),t.rXU(y.G),t.rXU(k.J))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-product-detail"]],decls:8,vars:3,consts:[[1,"container","mx-auto","px-4","py-8"],["appClickLogger","Volver a productos",1,"flex","items-center","text-primary-600","hover:text-primary-700","mb-6","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],["class","flex justify-center items-center py-20",4,"ngIf"],["class","bg-red-50 border border-red-200 rounded-lg p-6 text-center max-w-2xl mx-auto",4,"ngIf"],["class","max-w-6xl mx-auto",4,"ngIf"],[1,"flex","justify-center","items-center","py-20"],[1,"animate-spin","rounded-full","h-16","w-16","border-b-2","border-primary-500"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-6","text-center","max-w-2xl","mx-auto"],[1,"text-red-500","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-16","h-16","mx-auto"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"],[1,"text-xl","font-semibold","text-red-800","mb-2"],[1,"text-red-600","mb-4"],[1,"btn-primary",3,"click"],[1,"max-w-6xl","mx-auto"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-12","mb-16"],[1,"flex","flex-col"],[1,"bg-white","rounded-lg","shadow-lg","p-8","mb-4"],[1,"w-full","h-80","object-contain","transition-transform","duration-300","hover:scale-105",3,"src","alt"],[1,"grid","grid-cols-4","gap-2"],["class","bg-white border border-gray-200 rounded-lg p-2 cursor-pointer hover:border-primary-500 transition-colors",4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-primary-600","font-medium","mb-2","uppercase","tracking-wide","text-sm"],[1,"text-3xl","lg:text-4xl","font-bold","text-gray-900","mb-4"],[1,"flex","items-center","mb-6"],[1,"flex","items-center"],[4,"ngIf"],[1,"ml-2","text-sm","text-gray-600"],[1,"mb-6"],[1,"text-4xl","font-bold","text-primary-600"],[1,"text-sm","text-gray-500","ml-2"],[1,"mb-8"],[1,"text-lg","font-semibold","text-gray-900","mb-3"],[1,"text-gray-700","leading-relaxed"],[1,"bg-gray-50","rounded-lg","p-6","mb-6"],[1,"text-lg","font-semibold","text-gray-900","mb-4"],[1,"mb-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"flex","items-center","space-x-3"],["type","button","appClickLogger","Decrementar cantidad",1,"w-10","h-10","rounded-full","border","border-gray-300","flex","items-center","justify-center","hover:bg-gray-50","disabled:opacity-50","disabled:cursor-not-allowed","transition-colors",3,"disabled","click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 12H4"],["type","number","min","1","max","10",1,"w-20","text-center","border","border-gray-300","rounded-lg","py-2","px-3","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-transparent",3,"formControl"],["type","button","appClickLogger","Incrementar cantidad",1,"w-10","h-10","rounded-full","border","border-gray-300","flex","items-center","justify-center","hover:bg-gray-50","disabled:opacity-50","disabled:cursor-not-allowed","transition-colors",3,"disabled","click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],["class","mt-1 text-sm text-red-600",4,"ngIf"],[1,"flex","flex-col","sm:flex-row","gap-3"],["type","button","appClickLogger","Add to cart from details",1,"flex-1","bg-primary-600","text-white","py-3","px-6","rounded-lg","font-semibold","hover:bg-primary-700","active:bg-blue-800","active:scale-98","active:translate-y-0.5","disabled:opacity-50","disabled:cursor-not-allowed","transition-transform","duration-100","ease-out","shadow-md","flex","items-center","hover:shadow-lg","justify-center",3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"w-5","h-5","mr-2"],["d","M1 1.75A.75.75 0 0 1 1.75 1h1.628a1.75 1.75 0 0 1 1.734 1.51L5.18 3a65.25 65.25 0 0 1 13.36 1.412.75.75 0 0 1 .58.875 48.645 48.645 0 0 1-1.618 6.2.75.75 0 0 1-.712.513H6a2.503 2.503 0 0 0-2.292 1.5H17.25a.75.75 0 0 1 0 1.5H2.76a.75.75 0 0 1-.748-.807 4.002 4.002 0 0 1 2.716-3.486L3.626 2.716a.25.25 0 0 0-.248-.216H1.75A.75.75 0 0 1 1 1.75ZM6 17.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0ZM15.5 19a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"],["type","button","appClickLogger","Buy now",1,"flex-1","bg-green-600","text-white","py-3","px-6","rounded-lg","font-semibold","hover:bg-green-700","active:bg-green-800","active:scale-98","active:translate-y-0.5","disabled:opacity-50","disabled:cursor-not-allowed","transition-transform","duration-100","ease-out","shadow-md","hover:shadow-lg",3,"disabled","click"],[1,"grid","grid-cols-1","sm:grid-cols-3","gap-4","text-sm","text-gray-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2","text-green-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 15v-1a4 4 0 00-4-4H8m0 0l3 3m-3-3l3-3m9 14V5a2 2 0 00-2-2H6a2 2 0 00-2 2v16l4-2 4 2 4-2 4 2z"],["class","border-t border-gray-200 pt-12",4,"ngIf"],[1,"bg-white","border","border-gray-200","rounded-lg","p-2","cursor-pointer","hover:border-primary-500","transition-colors"],[1,"w-full","h-16","object-contain",3,"src","alt"],["class","w-5 h-5 text-yellow-400","fill","currentColor","viewBox","0 0 20 20",4,"ngFor","ngForOf","ngForTrackBy"],["class","w-5 h-5 text-yellow-400","fill","currentColor","viewBox","0 0 20 20",4,"ngIf"],["class","w-5 h-5 text-gray-300","fill","currentColor","viewBox","0 0 20 20",4,"ngFor","ngForOf","ngForTrackBy"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","text-yellow-400"],["d","M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","text-gray-300"],[1,"mt-1","text-sm","text-red-600"],[1,"border-t","border-gray-200","pt-12"],[1,"text-2xl","font-bold","text-gray-900","mb-8"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-4","gap-6"],["class","bg-white rounded-lg shadow-md cursor-pointer hover:shadow-lg transition-all duration-300","appClickLogger","Related Products",3,"routerLink",4,"ngFor","ngForOf","ngForTrackBy"],["appClickLogger","Related Products",1,"bg-white","rounded-lg","shadow-md","cursor-pointer","hover:shadow-lg","transition-all","duration-300",3,"routerLink"],[1,"p-4"],[1,"w-full","h-40","object-contain","mb-4",3,"src","alt"],[1,"font-semibold","text-lg","mb-2","line-clamp-2"],[1,"flex","items-center","justify-between"],[1,"text-xl","font-bold","text-primary-600"],[1,"flex","items-center","text-sm","text-gray-600"],[1,"text-yellow-400","mr-1"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"button",1),t.bIt("click",function(){return i.goBack()}),t.qSk(),t.j41(2,"svg",2),t.nrm(3,"path",3),t.k0s(),t.EFF(4," Back to products "),t.k0s(),t.DNE(5,K,2,0,"div",4),t.DNE(6,tt,10,1,"div",5),t.DNE(7,mt,64,21,"div",6),t.k0s()),2&o&&(t.R7$(5),t.Y8G("ngIf",i.loading()),t.R7$(1),t.Y8G("ngIf",i.error()&&!i.loading()),t.R7$(1),t.Y8G("ngIf",i.product()&&!i.loading()))},dependencies:[p.Sq,p.bT,c.me,c.Q0,c.BC,c.VZ,c.zX,c.l_,C.i,h.Wk,p.P9,p.oe],styles:["[_nghost-%COMP%]{display:block}.product-image-zoom[_ngcontent-%COMP%]{transition:transform .3s ease}.product-image-zoom[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.thumbnail[_ngcontent-%COMP%]{transition:all .2s ease}.thumbnail[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.thumbnail.active[_ngcontent-%COMP%]{border-color:#3b82f6;box-shadow:0 0 0 2px #3b82f61a}.quantity-input[_ngcontent-%COMP%]{-moz-appearance:textfield}.quantity-input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .quantity-input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.action-button[_ngcontent-%COMP%]{transition:all .2s ease}.action-button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 12px #00000026}.action-button[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}@media (max-width: 768px){.product-detail-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:2rem}.action-buttons[_ngcontent-%COMP%]{flex-direction:column}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}.loading-pulse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s cubic-bezier(.4,0,.6,1) infinite}.related-products-scroll[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:#cbd5e0 #f7fafc}.related-products-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{height:6px}.related-products-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f7fafc;border-radius:3px}.related-products-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e0;border-radius:3px}.related-products-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a0aec0}"]})}}return r})();var ft=a(3887);let F=(()=>{class r{canDeactivate(e){return!e.canDeactivate||e.canDeactivate()}static{this.\u0275fac=function(o){return new(o||r)}}static{this.\u0275prov=t.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),vt=(()=>{class r{static{this.\u0275fac=function(o){return new(o||r)}}static{this.\u0275mod=t.$C({type:r})}static{this.\u0275inj=t.G2t({providers:[F],imports:[p.MD,c.X1,ft.G,h.iI.forChild([{path:"",component:Z},{path:":id",component:ht,canDeactivate:[F]}])]})}}return r})()}}]);